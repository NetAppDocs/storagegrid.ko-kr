---
permalink: tenant/grid-federation-manage-cross-grid-replication.html 
sidebar: sidebar 
keywords: grid federation, cross-grid replication, use grid federation connection, replicate client delete markers, s3 bucket 
summary: 테넌트 계정이 생성되었을 때 그리드 페더레이션 연결 사용 권한이 할당된 경우 교차 그리드 복제를 사용하여 테넌트 소스 그리드의 버킷 및 테넌트 대상 그리드의 버킷 간에 객체를 자동으로 복제할 수 있습니다. 크로스 그리드 복제는 한 방향 또는 두 방향으로 수행될 수 있습니다. 
---
= 교차 그리드 복제 관리
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
테넌트 계정이 생성되었을 때 * 그리드 페더레이션 연결 사용 * 권한이 할당된 경우 교차 그리드 복제를 사용하여 테넌트의 소스 그리드에 있는 버킷과 테넌트 대상 그리드에 있는 버킷 간에 객체를 자동으로 복제할 수 있습니다. 크로스 그리드 복제는 한 방향 또는 두 방향으로 수행될 수 있습니다.



== 그리드 간 복제를 위한 워크플로우

워크플로우 다이어그램은 두 그리드에 있는 버킷 간 크로스 그리드 복제를 구성하기 위해 수행할 단계를 요약합니다. 이러한 단계는 아래에 자세히 설명되어 있습니다.

image::../media/grid-federation-cgr-workflow.png[교차 그리드 복제 워크플로우]



== 교차 그리드 복제를 구성합니다

교차 그리드 복제를 사용하려면 먼저 각 그리드의 해당 테넌트 계정에 로그인하고 동일한 버킷을 생성해야 합니다. 그런 다음 둘 중 하나 또는 두 버킷에서 교차 그리드 복제를 활성화할 수 있습니다.

.시작하기 전에
* 교차 그리드 복제의 요구 사항을 검토했습니다. 을 link:../admin/grid-federation-what-is-cross-grid-replication.html["크로스 그리드 복제란"]참조하십시오.
* 을 사용하고 link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"]있습니다.
* 테넌트 계정에는 * 그리드 페더레이션 연결 사용 * 권한이 있으며 동일한 테넌트 계정이 두 그리드에 있습니다. 을 link:../admin/grid-federation-manage-tenants.html["그리드 페더레이션 연결에 대해 허용된 테넌트를 관리합니다"]참조하십시오.
* 로그인하려는 테넌트 사용자는 두 그리드 모두에 이미 있으며 이 있는 사용자 그룹에 속해 link:tenant-management-permissions.html["루트 액세스 권한"]있습니다.
* 테넌트의 대상 그리드에 로컬 사용자로 로그인하는 경우 테넌트 계정의 루트 사용자가 해당 그리드에서 사용자 계정의 암호를 설정했습니다.




=== 두 개의 동일한 버킷을 생성합니다

첫 번째 단계로 각 그리드의 해당 테넌트 계정에 로그인하여 동일한 버킷을 생성합니다.

.단계
. 그리드 페더레이션 연결의 두 그리드 중 하나에서 시작하여 새 버킷을 만듭니다.
+
.. 두 그리드에 있는 테넌트 사용자의 자격 증명을 사용하여 테넌트 계정에 로그인합니다.
+

NOTE: 테넌트의 대상 그리드에 로컬 사용자로 로그인할 수 없는 경우 테넌트 계정의 루트 사용자가 사용자 계정의 암호를 설정했는지 확인합니다.

.. 의 지침을 link:creating-s3-bucket.html["S3 버킷을 생성합니다"]따릅니다.
.. 개체 설정 관리 * 탭에서 * 개체 버전 관리 사용 * 을 선택합니다.
.. StorageGRID 시스템에 S3 오브젝트 잠금이 설정된 경우 버킷에 S3 오브젝트 잠금을 활성화하지 마십시오.
.. Create bucket * 을 선택합니다.
.. 마침 * 을 선택합니다.


. 그리드 페더레이션 연결의 다른 그리드에 동일한 테넌트 계정에 대해 동일한 버킷을 생성하려면 이 단계를 반복합니다.
+

TIP: 필요에 따라 각 버킷은 다른 지역을 사용할 수 있습니다.





=== 교차 그리드 복제를 설정합니다

두 버킷 중 하나에 물체를 추가하기 전에 이 단계를 수행해야 합니다.

.단계
. 복제할 객체가 있는 그리드에서 시작하여 link:../admin/grid-federation-what-is-cross-grid-replication.html["한 방향으로 크로스 그리드 복제"]다음을 활성화합니다.
+
.. 버켓의 테넌트 계정에 로그인합니다.
.. 대시보드에서 * 버킷 보기 * 를 선택하거나 * 스토리지(S3) * > * 버킷 * 을 선택합니다.
.. 버킷 세부 정보 페이지에 액세스하려면 테이블에서 버킷 이름을 선택합니다.
.. Cross-grid replication * 탭을 선택합니다.
.. 사용 * 을 선택하고 요구 사항 목록을 검토합니다.
.. 모든 요구 사항이 충족되면 사용할 그리드 페더레이션 연결을 선택합니다.
.. 선택적으로 * Delete Markers 복제 * 의 설정을 변경하여 S3 클라이언트가 버전 ID가 포함되지 않은 소스 그리드에 삭제 요청을 발행하는 경우 대상 그리드에 어떤 일이 발생하는지 확인합니다.
+
*** * 예 * (기본값): 삭제 마커가 소스 버킷에 추가되고 대상 버킷에 복제됩니다.
*** * 아니요 *: 삭제 마커가 소스 버킷에 추가되지만 대상 버킷에 복제되지 않습니다.
+
image::../media/grid-federation-cross-grid-replication-client-deletes.png[두 그리드에 복제 클라이언트 삭제를 보여 주는 이미지입니다]

+

NOTE: 삭제 요청에 버전 ID가 포함된 경우 해당 객체 버전이 소스 버킷에서 영구적으로 제거됩니다. StorageGRID는 버전 ID가 포함된 삭제 요청을 복제하지 않으므로 동일한 객체 버전이 대상에서 삭제되지 않습니다.

+
자세한 내용은 을 link:../admin/grid-federation-what-is-cross-grid-replication.html["크로스 그리드 복제란"] 참조하십시오.



.. 필요에 따라 * 교차 그리드 복제 * 감사 범주의 설정을 변경하여 감사 메시지의 볼륨을 관리합니다.
+
*** * Error * (기본값): 실패한 교차 그리드 복제 요청만 감사 출력에 포함됩니다.
*** * 정상 *: 모든 교차 그리드 복제 요청이 포함되어 감사 출력 볼륨을 크게 높입니다.


.. 선택 사항을 검토합니다. 두 버킷이 모두 비어 있지 않으면 이 설정을 변경할 수 없습니다.
.. Enable and test * 를 선택합니다.
+
잠시 후 성공 메시지가 나타납니다. 이 버킷에 추가된 오브젝트는 이제 다른 그리드에 자동으로 복제됩니다. * 교차 그리드 복제 * 는 버킷 세부 정보 페이지에서 활성화된 기능으로 표시됩니다.



. 필요에 따라 다른 그리드의 해당 버킷으로 이동하고link:../admin/grid-federation-what-is-cross-grid-replication.html["양방향 교차 그리드 복제를 활성화합니다"].




== 그리드 간의 복제를 테스트합니다

버킷에 대해 교차 그리드 복제가 활성화된 경우 연결 및 교차 그리드 복제가 올바르게 작동하고 소스 및 대상 버킷이 모든 요구 사항을 충족하는지 확인해야 할 수 있습니다(예: 버전 관리가 계속 활성화됨).

.시작하기 전에
* 을 사용하고 link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"]있습니다.
* 이 있는 사용자 그룹에 속해 link:tenant-management-permissions.html["루트 액세스 권한"]있습니다.


.단계
. 버켓의 테넌트 계정에 로그인합니다.
. 대시보드에서 * 버킷 보기 * 를 선택하거나 * 스토리지(S3) * > * 버킷 * 을 선택합니다.
. 버킷 세부 정보 페이지에 액세스하려면 테이블에서 버킷 이름을 선택합니다.
. Cross-grid replication * 탭을 선택합니다.
. Test connection * 을 선택합니다.
+
연결이 정상이면 성공 배너가 나타납니다. 그렇지 않으면 사용자 및 그리드 관리자가 문제를 해결하는 데 사용할 수 있는 오류 메시지가 나타납니다. 자세한 내용은 을 참조하십시오 link:../admin/grid-federation-troubleshoot.html["그리드 통합 오류 문제 해결"].

. 양방향 복제가 수행되도록 구성된 경우 다른 그리드의 해당 버킷으로 이동하여 * Test connection * 을 선택하여 교차 그리드 복제가 다른 방향으로 작동하는지 확인합니다.




== 크로스 그리드 복제를 비활성화합니다

더 이상 다른 그리드에 객체를 복사하지 않으려는 경우 그리드 간 복제를 영구적으로 중지할 수 있습니다.

교차 그리드 복제를 사용하지 않도록 설정하기 전에 다음 사항에 유의하십시오.

* 교차 그리드 복제를 비활성화해도 그리드 간에 이미 복제된 개체는 제거되지 않습니다. 예를 들어 그리드 1의 객체가 `my-bucket` 그리드 2에서 에 복사된 `my-bucket` 경우 해당 버킷에 대해 교차 그리드 복제를 사용하지 않도록 설정하면 제거되지 않습니다. 이러한 개체를 삭제하려면 해당 개체를 수동으로 제거해야 합니다.
* 각 버킷에 대해 교차 그리드 복제가 설정된 경우(즉, 양방향으로 복제가 발생하는 경우), 하나 또는 두 버킷에 대해 교차 그리드 복제를 비활성화할 수 있습니다. 예를 들어, 그리드 1에서 그리드 2 `my-bucket`로 객체를 복제하는 동시에 그리드 2에서 그리드 1 `my-bucket`로 객체를 계속 `my-bucket` 복제할 수 없도록 설정할 수 `my-bucket` 있습니다.
* 그리드 페더레이션 연결을 사용하기 위해 테넌트의 권한을 제거하려면 먼저 교차 그리드 복제를 비활성화해야 합니다. 을 link:../admin/grid-federation-manage-tenants.html["허용된 테넌트 관리"]참조하십시오.
* 오브젝트가 포함된 버킷에 대해 교차 그리드 복제를 사용하지 않도록 설정하면 소스 및 대상 버킷에서 모든 오브젝트를 삭제하지 않는 한 교차 그리드 복제를 다시 활성화할 수 없습니다.
+

CAUTION: 두 버킷이 모두 비어 있지 않으면 복제를 다시 설정할 수 없습니다.



.시작하기 전에
* 을 사용하고 link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"]있습니다.
* 이 있는 사용자 그룹에 속해 link:tenant-management-permissions.html["루트 액세스 권한"]있습니다.


.단계
. 더 이상 복제할 객체가 없는 그리드에서 시작하여 버킷에 대한 교차 그리드 복제를 중지합니다.
+
.. 버켓의 테넌트 계정에 로그인합니다.
.. 대시보드에서 * 버킷 보기 * 를 선택하거나 * 스토리지(S3) * > * 버킷 * 을 선택합니다.
.. 버킷 세부 정보 페이지에 액세스하려면 테이블에서 버킷 이름을 선택합니다.
.. Cross-grid replication * 탭을 선택합니다.
.. 복제 비활성화 * 를 선택합니다.
.. 이 버킷에 대해 교차 그리드 복제를 비활성화하려면 텍스트 상자에 * Yes * 를 입력하고 * Disable * 을 선택합니다.
+
잠시 후 성공 메시지가 나타납니다. 이 버킷에 추가된 새 오브젝트는 더 이상 다른 그리드에 자동으로 복제될 수 없습니다. * 교차 그리드 복제 * 는 버킷 페이지에서 더 이상 활성화 기능으로 표시되지 않습니다.



. 양방향 복제가 수행되도록 구성된 경우 다른 그리드의 해당 버킷으로 이동하여 다른 방향으로 크로스 그리드 복제를 중지합니다.

