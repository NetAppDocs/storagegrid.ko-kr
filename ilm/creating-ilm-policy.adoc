---
permalink: ilm/creating-ilm-policy.html 
sidebar: sidebar 
keywords: how to create ILM policy 
summary: 서비스 품질 요구사항을 충족하는 하나 이상의 ILM 정책을 생성합니다. 
---
= ILM 정책을 생성합니다
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
서비스 품질 요구사항을 충족하는 하나 이상의 ILM 정책을 생성합니다.

하나의 활성 ILM 정책을 사용하면 모든 테넌트와 버킷에 동일한 ILM 규칙을 적용할 수 있습니다.

여러 개의 활성 ILM 정책을 사용하면 특정 테넌트와 버킷에 적절한 ILM 규칙을 적용하여 여러 서비스 품질 요구사항을 충족할 수 있습니다.



== ILM 정책을 생성합니다

.이 작업에 대해
자체 정책을 생성하기 전에 가 스토리지 요구 사항을 충족하지 않는지 link:ilm-policy-overview.html#default-ilm-policy["기본 ILM 정책"]확인하십시오.


NOTE: 테스트 시스템에서는 시스템 제공 정책, 2개 복사본 정책(단일 사이트 그리드의 경우) 또는 사이트당 복제본(다중 사이트 그리드의 경우) 1개만 사용하십시오. StorageGRID 11.6 이전 버전의 경우 이 정책의 기본 규칙은 모든 사이트가 포함된 모든 스토리지 노드 스토리지 풀을 사용합니다. StorageGRID 시스템에 사이트가 두 개 이상 있는 경우 한 개체의 복사본을 같은 사이트에 둘 수 있습니다.


NOTE: 의 경우 link:enabling-s3-object-lock-globally.html["전역 S3 오브젝트 잠금 설정이 활성화되었습니다"]ILM 정책이 S3 오브젝트 잠금이 설정된 버킷의 요구사항을 준수하는지 확인해야 합니다. 이 섹션에서 S3 오브젝트 잠금이 설정되었다는 지침을 따릅니다.

.시작하기 전에
* 을 사용하여 그리드 관리자에 로그인되어 있습니다.link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"]
* 이 link:../admin/admin-group-permissions.html["액세스 권한이 필요합니다"]있습니다.
* link:access-create-ilm-rule-wizard.html["ILM 규칙을 만들었습니다"]S3 오브젝트 잠금이 설정되어 있는지 여부를 기반으로 합니다.
+
[role="tabbed-block"]
====
.S3 오브젝트 잠금이 활성화되지 않았습니다
--
** link:what-ilm-rule-is.html["ILM 규칙을 만들었습니다"]정책에 추가하려고 합니다. 필요에 따라 정책을 저장하고 추가 규칙을 만든 다음 정책을 편집하여 새 규칙을 추가할 수 있습니다.
** link:creating-default-ilm-rule.html["기본 ILM 규칙을 만들었습니다"]에 필터가 포함되어 있지 않습니다.


--
.S3 오브젝트 잠금이 설정되었습니다
--
** link:enabling-s3-object-lock-globally.html["글로벌 S3 오브젝트 잠금 설정이 이미 활성화되어 있습니다"]StorageGRID 시스템용 입니다.
** link:what-ilm-rule-is.html["규정 준수 및 비준수 ILM 규칙을 만들었습니다"]정책에 추가하려고 합니다. 필요에 따라 정책을 저장하고 추가 규칙을 만든 다음 정책을 편집하여 새 규칙을 추가할 수 있습니다.
** link:creating-default-ilm-rule.html["기본 ILM 규칙을 만들었습니다"]정책을 준수해야 합니다.


--
====
* 비디오를 시청한 경우(선택 사항): https://netapp.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=e768d4da-da88-413c-bbaa-b1ff00874d10["비디오: ILM 정책 개요"^]
+
[link=https://netapp.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=e768d4da-da88-413c-bbaa-b1ff00874d10]
image::../media/video-screenshot-ilm-policies-118.png[비디오: ILM 정책 개요]



도 link:ilm-policy-overview.html["ILM 정책 사용"]참조하십시오.

.단계
. ILM * > * 정책 * 을 선택합니다.
+
전역 S3 개체 잠금 설정이 활성화된 경우 ILM 정책 페이지에는 호환되는 ILM 규칙이 표시됩니다.

. ILM 정책을 생성할 방법을 결정합니다.
+
[role="tabbed-block"]
====
.새 정책을 생성합니다
--
.. Create policy * 를 선택합니다.


--
.기존 정책을 복제합니다
--
.. 시작할 정책의 확인란을 선택한 다음 * Clone * 을 선택합니다.


--
.기존 정책을 편집합니다
.. 정책이 비활성 상태인 경우 편집할 수 있습니다. 시작할 비활성 정책의 확인란을 선택한 다음 * 편집 * 을 선택합니다.


====


. 정책 이름 * 필드에 정책의 고유한 이름을 입력합니다.
. 필요에 따라 * 변경 사유 * 필드에 새 정책을 생성하는 이유를 입력합니다.
. 정책에 규칙을 추가하려면 * 규칙 선택 * 을 선택합니다. 규칙 이름을 선택하여 해당 규칙의 설정을 봅니다.
+
--
정책을 클론 생성하는 경우:

** 클론 생성 중인 정책에 사용되는 규칙이 선택됩니다.
** 클론 생성 중인 정책에서 기본 규칙이 아닌 필터가 없는 규칙을 사용한 경우 해당 규칙 중 하나만 제외하고 모두 제거하라는 메시지가 표시됩니다.
** 기본 규칙에서 필터를 사용한 경우 새 기본 규칙을 선택하라는 메시지가 표시됩니다.
** 기본 규칙이 마지막 규칙이 아닌 경우 새 정책의 끝으로 규칙을 이동할 수 있습니다.


--
+
[role="tabbed-block"]
====
.S3 오브젝트 잠금이 활성화되지 않았습니다
--
.. 정책에 대한 기본 규칙 하나를 선택합니다. 새 기본 규칙을 생성하려면 * ILM 규칙 페이지 * 를 선택합니다.
+
기본 규칙은 정책의 다른 규칙과 일치하지 않는 개체에 적용됩니다. 기본 규칙은 필터를 사용할 수 없으며 항상 마지막으로 평가됩니다.

+

NOTE: Make 2 Copies 규칙을 정책의 기본 규칙으로 사용하지 마십시오. 2개 복제본 만들기 규칙은 모든 사이트를 포함하는 단일 스토리지 풀인 모든 스토리지 노드를 사용합니다. StorageGRID 시스템에 사이트가 두 개 이상 있는 경우 한 개체의 복사본을 같은 사이트에 둘 수 있습니다.



--
.S3 오브젝트 잠금이 설정되었습니다
--
.. 정책에 대한 기본 규칙 하나를 선택합니다. 새 기본 규칙을 생성하려면 * ILM 규칙 페이지 * 를 선택합니다.
+
규칙 목록에는 규정을 준수하며 필터를 사용하지 않는 규칙만 포함됩니다.

+

NOTE: Make 2 Copies 규칙을 정책의 기본 규칙으로 사용하지 마십시오. 2개 복제본 만들기 규칙은 모든 사이트를 포함하는 단일 스토리지 풀인 모든 스토리지 노드를 사용합니다. 이 규칙을 사용하는 경우 오브젝트의 여러 복사본이 동일한 사이트에 배치될 수 있습니다.

.. 비준수 S3 버킷의 오브젝트에 대해 다른 "기본" 규칙이 필요한 경우 * 비준수 S3 버킷에 대한 필터가 없는 규칙 포함 * 을 선택하고 필터를 사용하지 않는 비준수 규칙 하나를 선택합니다.
+
예를 들어, Cloud Storage Pool을 사용하여 S3 Object Lock이 활성화되지 않은 버킷에 오브젝트를 저장할 수 있습니다.

+

NOTE: 필터를 사용하지 않는 비준수 규칙을 하나만 선택할 수 있습니다.



도 link:example-7-compliant-ilm-policy-for-s3-object-lock.html["예 7: S3 오브젝트 잠금에 대한 규정 준수 ILM 정책"]참조하십시오.

--
====


. 기본 규칙을 모두 선택했으면 * Continue * 를 선택합니다.
. 다른 규칙 단계에서는 정책에 추가할 다른 규칙을 선택합니다. 이러한 규칙은 하나 이상의 필터(테넌트 계정, 버킷 이름, 고급 필터 또는 비현재 참조 시간)를 사용합니다. 그런 다음 * 선택 * 을 선택합니다.
+
이제 정책 생성 창에 선택한 규칙이 나열됩니다. 기본 규칙은 끝에 있으며 다른 규칙은 그 위에 있습니다.

+
S3 오브젝트 잠금이 설정되어 있고 비준수 "기본" 규칙도 선택한 경우 해당 규칙은 정책에서 두 번째-마지막 규칙으로 추가됩니다.

+

NOTE: 규칙이 개체를 영구적으로 유지하지 않으면 경고가 나타납니다. 이 정책을 활성화할 때 버킷 수명 주기에 따라 개체를 더 오래 보존하지 않는 한 기본 규칙에 대한 배치 지침이 경과할 때 StorageGRID에서 개체를 삭제할 것인지 확인해야 합니다.

. 기본 규칙이 아닌 규칙의 행을 끌어서 이러한 규칙이 평가되는 순서를 결정합니다.
+
기본 규칙을 이동할 수 없습니다. S3 오브젝트 잠금이 설정된 경우 비준수 "기본" 규칙을 선택한 경우에도 이동할 수 없습니다.

+

NOTE: ILM 규칙이 올바른 순서로 되어 있는지 확인해야 합니다. 정책이 활성화되면 위에서 시작하여 나열된 순서대로 새 개체와 기존 개체가 평가됩니다.

. 필요에 따라 * 규칙 선택 * 을 선택하여 규칙을 추가하거나 제거합니다.
. 완료되면 * Save * 를 선택합니다.
. 이 단계를 반복하여 추가 ILM 정책을 생성합니다.
. <<simulate-ilm-policy,ILM 정책을 시뮬레이션합니다>>.. 정책을 활성화하기 전에 항상 시뮬레이트하여 예상대로 작동하는지 확인해야 합니다.




== 정책 시뮬레이션

정책을 활성화하고 운영 데이터에 적용하기 전에 테스트 객체에 대한 정책을 시뮬레이션합니다.

.시작하기 전에
* 테스트할 각 오브젝트의 S3 버킷/오브젝트 키를 알 수 있습니다.


.단계
. S3 클라이언트 또는 를 사용하여 link:../tenant/use-s3-console.html["S3 콘솔"]각 규칙을 테스트하는 데 필요한 오브젝트를 수집합니다.
. ILM 정책 페이지에서 정책의 확인란을 선택한 다음 * 시뮬레이션 * 을 선택합니다.
. Object * 필드에 테스트 객체에 대한 S3를 `bucket/object-key` 입력합니다.  `bucket-01/filename.png`예를 들어,
. S3 버전 관리가 활성화된 경우 * 버전 ID * 필드에 객체의 버전 ID를 선택적으로 입력합니다.
. 시뮬레이션 * 을 선택합니다.
. Simulation 결과 섹션에서 각 개체가 올바른 규칙과 일치하는지 확인합니다.
. 어떤 스토리지 풀 또는 삭제 코딩 프로필이 적용되었는지 확인하려면 일치하는 규칙의 이름을 선택하여 규칙 세부 정보 페이지로 이동합니다.



CAUTION: 기존 복제 및 삭제 코딩 개체의 배치에 대한 변경 사항을 검토합니다. 기존 오브젝트의 위치를 변경하면 새로운 배치가 평가되고 구현될 때 일시적인 리소스 문제가 발생할 수 있습니다.

.결과
정책 규칙에 대한 모든 편집 내용은 시뮬레이션 결과에 반영되고 새 일치 항목과 이전 일치 항목이 표시됩니다. 시뮬레이션 정책 창은 Simulation 결과 목록에서 * Clear All * 또는 각 개체에 대한 제거 아이콘을 선택할 때까지 테스트한 개체를 image:../media/icon-x-to-remove.png["제거 아이콘"]유지합니다.

.관련 정보
link:simulating-ilm-policy-examples.html["ILM 정책 시뮬레이션의 예"]



== 정책을 활성화합니다

새로운 단일 ILM 정책을 활성화하면 기존 오브젝트 및 새로 수집된 오브젝트가 해당 정책에 의해 관리됩니다. 여러 정책을 활성화할 때 버킷에 할당된 ILM 정책 태그는 관리할 오브젝트를 결정합니다.

새 정책을 활성화하기 전에:

. 정책을 시뮬레이션하여 예상한 대로 작동하는지 확인합니다.
. 기존 복제 및 삭제 코딩 개체의 배치에 대한 변경 사항을 검토합니다. 기존 오브젝트의 위치를 변경하면 새로운 배치가 평가되고 구현될 때 일시적인 리소스 문제가 발생할 수 있습니다.



CAUTION: ILM 정책의 오류로 인해 복구할 수 없는 데이터 손실이 발생할 수 있습니다.

.이 작업에 대해
ILM 정책을 활성화하면 시스템은 새 정책을 모든 노드에 배포합니다. 그러나 새 활성 정책은 모든 그리드 노드가 새 정책을 받을 수 있을 때까지 실제로 적용되지 않을 수 있습니다. 경우에 따라 시스템이 그리드 객체가 실수로 제거되지 않도록 새 활성 정책을 구현하려고 대기합니다. 주요 내용은 다음과 같습니다.

* 정책을 변경하여 * 데이터 중복성 또는 내구성을 높이면 * 이러한 변경 사항이 즉시 적용됩니다. 예를 들어, 2개 복사본 규칙 대신 3개 복사본 규칙이 포함된 새 정책을 활성화하면 데이터 중복성이 증가하므로 해당 정책이 즉시 구현됩니다.
* 정책을 변경하여 * 데이터 중복성 또는 내구성을 저하시킬 수 있는 경우 * 모든 그리드 노드를 사용할 수 있을 때까지 해당 변경 사항이 구현되지 않습니다. 예를 들어 3개 복제본 규칙 대신 2개 복제본 규칙을 사용하는 새 정책을 활성화하면 새 정책이 활성 정책 탭에 나타나지만 모든 노드가 온라인 상태가 되어 사용 가능할 때까지 적용됩니다.


.단계
정책 하나 또는 여러 개를 활성화하는 단계를 따릅니다.

[role="tabbed-block"]
====
.하나의 정책을 활성화합니다
--
활성 정책이 하나만 있는 경우 다음 단계를 수행하십시오. 이미 활성 정책이 하나 이상 있고 추가 정책을 활성화하는 경우 여러 정책을 활성화하는 단계를 따릅니다.

. 정책을 활성화할 준비가 되면 * ILM * > * Policies * 를 선택합니다.
+
또는 * ILM * > * 정책 태그 * 페이지에서 단일 정책을 활성화할 수 있습니다.

. 정책 탭에서 활성화할 정책의 확인란을 선택한 다음 * 활성화 * 를 선택합니다.
. 적절한 단계를 따릅니다.
+
** 정책을 활성화할지 확인하는 경고 메시지가 나타나면 * OK * 를 선택합니다.
** 정책에 대한 세부 정보가 포함된 경고 메시지가 나타나는 경우:
+
... 세부 정보를 검토하여 정책이 데이터를 예상대로 관리하는지 확인합니다.
... 기본 규칙에 제한된 기간 동안 개체를 저장하는 경우 보존 다이어그램을 검토한 다음 텍스트 상자에 해당 일 수를 입력합니다.
... 기본 규칙에서 개체를 영구적으로 저장하지만 하나 이상의 다른 규칙이 보존이 제한된 경우 텍스트 상자에 * yes * 를 입력합니다.
... 정책 활성화 * 를 선택합니다.






--
.여러 정책을 활성화합니다
--
여러 정책을 활성화하려면 태그를 생성하고 각 태그에 정책을 할당해야 합니다.


TIP: 여러 태그를 사용하는 경우 테넌트가 정책 태그를 버킷에 자주 재할당하면 그리드 성능이 영향을 받을 수 있습니다. 신뢰할 수 없는 테넌트가 있는 경우 기본 태그만 사용하는 것이 좋습니다.

. ILM * > * 정책 태그 * 를 선택합니다.
. Create * 를 선택합니다.
. 정책 태그 만들기 대화 상자에서 태그 이름을 입력하고 원하는 경우 태그에 대한 설명을 입력합니다.
+

NOTE: Tenant에서 태그 이름과 설명을 볼 수 있습니다. 테넌트가 버킷에 할당할 정책 태그를 선택할 때 정보에 입각한 결정을 내리는 데 도움이 되는 값을 선택합니다. 예를 들어, 할당된 정책이 일정 시간이 지난 후 개체를 삭제하는 경우 설명에 해당 정보를 전달할 수 있습니다. 이러한 필드에는 중요한 정보를 포함하지 마십시오.

. 태그 만들기 * 를 선택합니다.
. ILM 정책 태그 표에서 풀다운 메뉴를 사용하여 태그에 할당할 정책을 선택합니다.
. 정책 제한 사항 열에 경고가 나타나면 * 정책 세부 정보 보기 * 를 선택하여 정책을 검토하십시오.
. 각 정책이 예상대로 데이터를 관리하는지 확인합니다.
. 할당된 정책 활성화 * 를 선택합니다. 또는 * 변경 내용 지우기 * 를 선택하여 정책 할당을 제거합니다.
. 새 태그를 사용하여 정책 활성화 대화 상자에서 각 태그, 정책 및 규칙이 개체를 관리하는 방법에 대한 설명을 검토합니다. 필요에 따라 변경하여 정책이 개체를 예상대로 관리하도록 합니다.
. 정책을 활성화하려면 텍스트 상자에 * 예 * 를 입력한 다음 * 정책 활성화 * 를 선택합니다.


--
====
.관련 정보
link:example-6-changing-ilm-policy.html["예 6: ILM 정책 변경"]
