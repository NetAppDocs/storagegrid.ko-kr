---
permalink: ilm/example-8-priorities-for-s3-bucket-lifecycle-and-ilm-policy.html 
sidebar: sidebar 
keywords: retention priority, example S3 bucket lifecycle, example ILM policy 
summary: 라이프사이클 구성에 따라 오브젝트는 S3 버킷 라이프사이클 또는 ILM 정책의 보존 설정을 따릅니다. 
---
= 예 8: S3 버킷 라이프사이클 및 ILM 정책의 우선순위
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
라이프사이클 구성에 따라 오브젝트는 S3 버킷 라이프사이클 또는 ILM 정책의 보존 설정을 따릅니다.



== ILM 정책보다 우선 순위가 높은 버킷 라이프사이클의 예

ILM 정책::
+
--
* 비현재 시간 참조 기준 규칙: 0일차에 X개 복사본을 20일 동안 유지합니다
* 수집 시간 참조 기반 규칙(기본값): Day 0에 X 복사본을 50일 동안 유지합니다


--
버킷 수명 주기:: `"Filter": {"Prefix": "docs/"}, "Expiration": {"Days": 100}, "NoncurrentVersionExpiration": {"NoncurrentDays": 5}`
결과::
+
--
* "docs/text"라는 이름의 개체가 수집됩니다. "docs/" 접두사의 버킷 수명 주기 필터와 일치합니다.
+
** 100일이 지나면 삭제 표식이 만들어지고 "문서/텍스트"가 비최신 상태가 됩니다.
** 5일 후 수집 후 총 105일이 지나면 "docs/text"가 삭제됩니다.
** 95일 후, 수집 이후 총 200일, 삭제 마커 생성 후 100일이 지나면 만료된 삭제 마커가 삭제됩니다.


* "비디오/동영상"이라는 이름의 개체가 수집됩니다. 필터와 일치하지 않으며 ILM 보존 정책을 사용합니다.
+
** 50일이 지나면 삭제 마커가 생성되고 "비디오/동영상"이 비최신 상태가 됩니다.
** 20일 후 수집 후 총 70일이 지나면 "비디오/동영상"이 삭제됩니다.
** 30일 후, 수집 후 총 100일, 삭제 마커 생성 후 50일이 지나면 만료된 삭제 마커가 삭제됩니다.




--




== 버킷 수명 주기의 예 - 영구 보관

ILM 정책::
+
--
* 비현재 시간 참조 기준 규칙: 0일차에 X개 복사본을 20일 동안 유지합니다
* 수집 시간 참조 기반 규칙(기본값): Day 0에 X 복사본을 50일 동안 유지합니다


--
버킷 수명 주기:: `"Filter": {"Prefix": "docs/"}, "Expiration": {"ExpiredObjectDeleteMarker": true}`
결과::
+
--
* "docs/text"라는 이름의 개체가 수집됩니다. "docs/" 접두사의 버킷 수명 주기 필터와 일치합니다.
+
이 `Expiration` 작업은 만료된 삭제 표식에만 적용되며, 이는 "docs/"로 시작하는 다른 모든 항목을 영구적으로 유지함을 의미합니다.

+
"docs/"로 시작하는 삭제 마커는 만료될 때 제거됩니다.

* "비디오/동영상"이라는 이름의 개체가 수집됩니다. 필터와 일치하지 않으며 ILM 보존 정책을 사용합니다.
+
** 50일이 지나면 삭제 마커가 생성되고 "비디오/동영상"이 비최신 상태가 됩니다.
** 20일 후 수집 후 총 70일이 지나면 "비디오/동영상"이 삭제됩니다.
** 30일 후, 수집 후 총 100일, 삭제 마커 생성 후 50일이 지나면 만료된 삭제 마커가 삭제됩니다.




--




== 버킷 수명 주기를 사용하여 ILM을 복제하고 만료된 삭제 마커를 정리하는 예

ILM 정책::
+
--
* 비현재 시간 참조 기준 규칙: 0일차에 X개 복사본을 20일 동안 유지합니다
* 수집 시간 참조 기준 규칙(기본값): Day 0에 X 복사본을 영구적으로 유지합니다


--
버킷 수명 주기:: `"Filter": {}, "Expiration": {"ExpiredObjectDeleteMarker": true}, "NoncurrentVersionExpiration": {"NoncurrentDays": 20}`
결과::
+
--
* ILM 정책이 버킷 수명주기에 복제됩니다.
+
** ILM 정책의 영구 규칙은 개체를 수동으로 제거하고 20일 후에 비최신 버전을 정리하도록 설계되었습니다. 따라서 수집 시간 규칙은 만료된 삭제 마커를 영구적으로 유지합니다.
** 버킷 수명 주기는 추가하는 동안 ILM 정책의 동작을 복제하므로 `"ExpiredObjectDeleteMarker": true` 만료 후 삭제 마커가 제거됩니다


* 개체가 수집됩니다. 필터가 없다는 것은 버킷 수명주기가 모든 객체에 적용되고 ILM 보존 설정이 재정의됨을 의미합니다.
+
** 테넌트가 개체 삭제 요청을 실행하면 삭제 표식이 만들어지고 개체가 비최신 상태가 됩니다.
** 20일이 지나면 비현재 개체가 삭제되고 삭제 표식이 만료됩니다.
** 잠시 후 만료된 삭제 마커가 삭제됩니다.




--

