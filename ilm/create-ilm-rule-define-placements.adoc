---
permalink: ilm/create-ilm-rule-define-placements.html 
sidebar: sidebar 
keywords: ilm rule step 2, define placements 
summary: 'ILM 규칙 생성 마법사의 배치 정의 단계를 사용하면 개체 저장 기간, 복사본 유형(복제 또는 삭제 코딩\), 저장소 위치 및 복사본 수를 결정하는 배치 지침을 정의할 수 있습니다.' 
---
= 단계 2/3: 배치 정의
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM 규칙 생성 마법사의 * 배치 정의 * 단계를 통해 객체 저장 기간, 복제본 유형(복제 또는 삭제 코딩), 저장 위치 및 복제본 수를 결정하는 배치 지침을 정의할 수 있습니다.


NOTE: 표시된 스크린샷은 예시입니다. 결과는 StorageGRID 버전에 따라 다를 수 있습니다.

.이 작업에 대해
ILM 규칙에는 하나 이상의 배치 지침이 포함될 수 있습니다. 각 배치 지침은 단일 기간에 적용됩니다. 두 개 이상의 명령을 사용하는 경우 기간은 연속적이어야 하며, 적어도 하나의 명령은 0일째부터 시작해야 합니다. 지침은 계속 진행할 수 있으며, 더 이상 오브젝트 복사본이 필요하지 않을 때까지 계속됩니다.

다른 유형의 사본을 만들거나 해당 기간 동안 다른 위치를 사용하려는 경우 각 배치 지침에는 여러 줄이 있을 수 있습니다.

이 예에서 ILM 규칙은 복제된 복사본 하나를 사이트 1에 저장하고 복제된 복사본을 사이트 2에 1년간 저장합니다. 1년 후에는 2+1 삭제 코딩 복사본을 만들어 하나의 사이트에만 저장합니다.

image::../media/ilm_create_ilm_rule_wizard_2.png[ILM 규칙 생성 마법사 2단계]

.단계
. 참조 시간 * 에서 배치 지침의 시작 시간을 계산할 때 사용할 시간 유형을 선택합니다.
+
[cols="1a,2a"]
|===
| 옵션을 선택합니다 | 설명 


 a| 
수집 시간
 a| 
객체가 수집된 시간입니다.



 a| 
마지막 액세스 시간입니다
 a| 
개체를 마지막으로 검색한 시간(읽기 또는 보기)

이 옵션을 사용하려면 S3 버킷에 대해 마지막 액세스 시간에 대한 업데이트를 활성화해야 합니다. 을 link:using-last-access-time-in-ilm-rules.html["ILM 규칙에서 마지막 액세스 시간을 사용합니다"]참조하십시오.



 a| 
사용자 정의 생성 시간입니다
 a| 
사용자 정의 메타데이터에 지정된 시간입니다.



 a| 
현재 시간이 아닙니다
 a| 
에서 "버전 관리가 활성화된 S3 버켓의 이전 오브젝트 버전에만 이 규칙 적용" 질문에 대해 * 예 * 를 선택한 경우 "비현재 시간"이 자동으로 선택됩니다link:create-ilm-rule-enter-details.html["ILM 규칙 만들기 마법사의 1단계"].

|===
+
_compliant_rule을 생성하려면 * Ingest Time * 을 선택해야 합니다. 을 link:managing-objects-with-s3-object-lock.html["S3 오브젝트 잠금으로 오브젝트 관리"]참조하십시오.

. 시간 간격 및 배치 * 섹션에서 시작 시간과 첫 번째 기간의 기간을 입력합니다.
+
예를 들어, 첫 번째 연도의 오브젝트를 저장할 위치를 지정할 수 있습니다(_365일의 경우 0일 점포 _). 적어도 하나의 명령은 0일에 시작해야 합니다.

. 복제된 복사본을 생성하려면 다음을 수행합니다.
+
.. Store objects by *(개체 저장 기준 *) 드롭다운 목록에서 * Replicating *(복제 *)을 선택합니다.
.. 복사할 매수를 선택합니다.
+
매수를 1로 변경하면 경고가 나타납니다. 특정 기간 동안 복제된 복사본을 하나만 생성하는 ILM 규칙은 데이터가 영구적으로 손실될 위험이 있습니다. 을 link:why-you-should-not-use-single-copy-replication.html["단일 복사본 복제를 사용하지 않아야 하는 이유"]참조하십시오.

+
위험을 방지하려면 다음 중 하나 이상을 수행하십시오.

+
*** 해당 기간의 사본 수를 늘립니다.
*** 다른 스토리지 풀 또는 클라우드 스토리지 풀에 복사본을 추가합니다.
*** 복제 * 대신 * 삭제 코딩 * 을 선택하십시오.
+
이 규칙이 모든 기간에 대해 여러 복사본을 이미 생성한 경우 이 경고를 무시해도 됩니다.



.. copies at * 필드에서 추가할 스토리지 풀을 선택합니다.
+
* 스토리지 풀을 하나만 지정하는 경우 * StorageGRID는 지정된 스토리지 노드에 복제된 객체 복사본을 하나만 저장할 수 있습니다. 그리드에 스토리지 노드 3개가 포함되어 있고 복제본 수로 4를 선택한 경우 복제본 3개만 생성하고 각 스토리지 노드에 대해 복제본 1개를 생성합니다.

+
ILM 규칙을 완전히 적용할 수 없음을 나타내기 위해 * ILM 배치 달성 안 됨 * 경고가 트리거됩니다.

+
* 둘 이상의 스토리지 풀을 지정하는 경우 * 다음 규칙을 염두에 두십시오.

+
*** 복제본 수는 스토리지 풀 수보다 클 수 없습니다.
*** 복제본 수가 스토리지 풀 수와 같으면 객체 복제본 하나가 각 스토리지 풀에 저장됩니다.
*** 복제본 수가 스토리지 풀 수보다 적은 경우 하나의 복제본이 수집 사이트에 저장된 다음 나머지 복제본을 분산하여 풀 간에 디스크 사용량을 균형 있게 유지하는 한편, 어느 사이트에서든 객체의 복제본을 두 개 이상 확보하지 못하도록 합니다.
*** 스토리지 풀이 겹칠 경우(동일한 스토리지 노드 포함) 개체의 모든 복제본이 하나의 사이트에만 저장될 수 있습니다. 따라서 모든 스토리지 노드 스토리지 풀(StorageGRID 11.6 이하)과 다른 스토리지 풀을 지정하지 마십시오.




. 삭제 코딩 복사본을 만들려면:
+
.. Store objects by * (개체 저장 기준 *) 드롭다운 목록에서 * 삭제 코딩 * 을 선택합니다.
+

NOTE: 삭제 코딩은 1MB 이상의 오브젝트에 가장 적합합니다. 매우 작은 삭제 코딩 조각을 관리해야 하는 오버헤드를 방지하기 위해 200KB 미만의 오브젝트에 삭제 코딩을 사용하지 마십시오.

.. 200KB보다 큰 값에 대해 개체 크기 필터를 추가하지 않은 경우 * Previous * 를 선택하여 1단계로 돌아갑니다. 그런 다음 * 고급 필터 추가 * 를 선택하고 * 개체 크기 * 필터를 200KB보다 큰 값으로 설정합니다.
.. 추가할 스토리지 풀 및 사용할 삭제 코딩 체계를 선택합니다.
+
삭제 코딩 복사본의 스토리지 위치에는 삭제 코딩 체계의 이름과 스토리지 풀의 이름이 차례로 포함됩니다.

+
사용 가능한 삭제 코딩 체계는 선택한 스토리지 풀에 있는 스토리지 노드의 수에 따라 제한됩니다.  `Recommended`배지가 을 제공하는 구성표 옆에 link:../ilm/what-erasure-coding-schemes-are.html["최상의 보호 또는 스토리지 오버헤드"]나타납니다.



. 선택 사항:
+
.. 다른 위치에 사본을 추가로 생성하려면 * 다른 유형 또는 위치 추가 * 를 선택합니다.
.. 다른 기간을 추가하려면 * 다른 기간 추가 * 를 선택합니다.
+
[NOTE]
====
개체는 다음 설정에 따라 삭제됩니다.

*** 다른 기간이 * Forever * 로 끝나지 않는 한 개체는 최종 기간이 끝날 때 자동으로 삭제됩니다.
*** 에 따라 link:../ilm/example-8-priorities-for-s3-bucket-lifecycle-and-ilm-policy.html#example-of-bucket-lifecycle-taking-priority-over-ilm-policy["버킷 및 테넌트 보존 기간 설정"]ILM 보존 기간이 종료되어도 개체가 삭제되지 않을 수 있습니다.


====


. 클라우드 스토리지 풀에 오브젝트를 저장하려면 다음을 수행합니다.
+
.. Store objects by *(개체 저장 기준 *) 드롭다운 목록에서 * Replicating *(복제 *)을 선택합니다.
.. 매수 * 필드를 선택한 다음 클라우드 스토리지 풀을 선택합니다.
+
클라우드 스토리지 풀을 사용할 때는 다음 규칙을 염두에 두십시오.

+
*** 단일 배치 지침에서는 여러 클라우드 스토리지 풀을 선택할 수 없습니다. 마찬가지로, 동일한 배치 지침에서는 클라우드 스토리지 풀과 스토리지 풀을 선택할 수 없습니다.
*** 특정 Cloud Storage Pool에서는 오브젝트 복사본을 하나만 저장할 수 있습니다. Copies * 를 2개 이상으로 설정하면 오류 메시지가 나타납니다.
*** 클라우드 스토리지 풀에 동시에 둘 이상의 오브젝트 복사본을 저장할 수 없습니다. Cloud Storage Pool을 사용하는 여러 배치에서 날짜가 중복되거나 같은 배치의 여러 라인이 Cloud Storage Pool을 사용하는 경우 오류 메시지가 나타납니다.
*** 오브젝트를 StorageGRID에서 복제 또는 삭제 코딩 복사본으로 저장하는 동시에 클라우드 스토리지 풀에 저장할 수 있습니다. 그러나 해당 기간의 배치 지침에는 여러 줄을 포함해야 각 위치에 대한 사본의 수와 유형을 지정할 수 있습니다.




. 고정 다이어그램에서 배치 지침을 확인합니다.
+
이 예에서 ILM 규칙은 복제된 복사본 하나를 사이트 1에 저장하고 복제된 복사본을 사이트 2에 1년간 저장합니다. 1년 후 10년 동안 삭제 코딩 복사본을 6개 이상의 3개 사이트에 저장할 수 있습니다. 총 11년이 지나면 StorageGRID에서 객체가 삭제됩니다.

+
보존 다이어그램의 규칙 분석 섹션에 나와 있는 내용은 다음과 같습니다.

+
** StorageGRID 사이트 손실 보호는 이 규칙 기간 동안 적용됩니다.
** 이 규칙에 의해 처리된 객체는 Day 4015 이후에 삭제됩니다.
+
을 참조하십시오 link:using-multiple-storage-pools-for-cross-site-replication.html["사이트 손실 방지"]

+
image::../media/ilm_rule_retention_diagram.png[ILM 규칙 보존 다이어그램]



. Continue * 를 선택합니다. link:create-ilm-rule-select-ingest-behavior.html["3단계(수집 동작 선택)"] ILM 규칙 생성 마법사가 나타납니다.

