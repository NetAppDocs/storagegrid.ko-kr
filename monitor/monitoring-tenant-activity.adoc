---
permalink: monitor/monitoring-tenant-activity.html 
sidebar: sidebar 
keywords: how to monitor tenant activity 
summary: 모든 S3 클라이언트 작업은 StorageGRID 테넌트 계정과 연결됩니다. Grid Manager를 사용하여 모든 테넌트 또는 특정 테넌트의 스토리지 사용량 또는 네트워크 트래픽을 모니터링할 수 있습니다. 감사 로그 또는 Grafana 대시보드를 사용하여 테넌트가 StorageGRID를 사용하는 방법에 대한 자세한 정보를 수집할 수 있습니다. 
---
= 테넌트 작업을 모니터링합니다
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
모든 S3 클라이언트 작업은 StorageGRID 테넌트 계정과 연결됩니다. Grid Manager를 사용하여 모든 테넌트 또는 특정 테넌트의 스토리지 사용량 또는 네트워크 트래픽을 모니터링할 수 있습니다. 감사 로그 또는 Grafana 대시보드를 사용하여 테넌트가 StorageGRID를 사용하는 방법에 대한 자세한 정보를 수집할 수 있습니다.

.시작하기 전에
* 을 사용하여 그리드 관리자에 로그인되어 있습니다.link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"]
* 이 link:../admin/admin-group-permissions.html["루트 액세스 또는 테넌트 계정 권한"]있습니다.




== 모든 테넌트를 봅니다

Tenants 페이지에는 현재 모든 테넌트 계정에 대한 기본 정보가 표시됩니다.

.단계
. *세입자*를 선택하세요.
. 테넌트 페이지에 표시된 정보를 검토합니다.
+
각 테넌트에 대해 사용된 논리적 공간, 할당량 사용량, 할당량 및 객체 수가 나열됩니다. 테넌트에 대해 할당량이 설정되지 않은 경우 할당량 사용 및 할당량 필드에는 대시(&#8212;)가 포함됩니다.

+

NOTE: 이 테넌트에 속한 모든 객체의 논리적 크기에는 완료되지 않은 멀티파트 업로드와 진행 중인 멀티파트 업로드가 포함됩니다.  이 크기에는 ILM 정책에 사용되는 추가적인 물리적 공간은 포함되지 않습니다.  사용된 공간 값은 추정치입니다.  이러한 추정치는 수집 타이밍, 네트워크 연결, 노드 상태의 영향을 받습니다.

+
image::../media/tenant_accounts_page.png[테넌트 계정 페이지입니다]

. 필요한 경우 * 로그인/URL 복사 * 열에서 로그인 링크를 선택하여 테넌트 계정에 image:../media/icon_tenant_sign_in.png["테넌트 로그인 아이콘"]로그인합니다.
. 필요한 경우 * 로그인/URL 복사 * 열에서 URL 복사 링크를 선택하여 테넌트의 로그인 페이지에 대한 URL을 image:../media/icon_tenant_copy_url.png["테넌트 복사 URL 아이콘"]복사합니다.
. 필요에 따라 * CSV로 내보내기 * 를 선택하여 모든 테넌트에 대한 사용 값이 포함된 파일을 보고 `.csv` 내보냅니다.
+
파일을 열거나 저장하라는 메시지가 `.csv` 표시됩니다.

+
파일의 내용은 `.csv` 다음 예제와 같습니다.

+
image::../media/tenant_accounts_example_csv.png[테넌트 계정 예 .csv]

+
파일을 스프레드시트 응용 프로그램에서 열거나 자동화에서 사용할 수 `.csv` 있습니다.

. 오브젝트가 나열되지 않은 경우 선택적으로 * 작업 * > * 삭제 * 를 선택하여 하나 이상의 테넌트를 제거합니다. 을 link:../admin/deleting-tenant-account.html["테넌트 계정을 삭제합니다"]참조하십시오.
+
계정에 버킷이나 컨테이너가 포함된 경우 테넌트 계정을 제거할 수 없습니다.





== 특정 테넌트를 봅니다

특정 테넌트의 세부 정보를 볼 수 있습니다.

.단계
. 테넌트 페이지에서 테넌트 이름을 선택합니다.
+
테넌트 세부 정보 페이지가 나타납니다.

+
image::../media/tenant_usage_modal.png[테넌트 사용 모달]

. 페이지 상단의 테넌트 개요를 검토합니다.
+
세부 정보 페이지의 이 섹션에서는 테넌트의 개체 수, 할당량 사용, 사용된 논리적 공간 및 할당량 설정을 비롯한 테넌트에 대한 요약 정보를 제공합니다.

+

NOTE: 이 테넌트에 속한 모든 객체의 논리적 크기에는 완료되지 않은 멀티파트 업로드와 진행 중인 멀티파트 업로드가 포함됩니다.  이 크기에는 ILM 정책에 사용되는 추가적인 물리적 공간은 포함되지 않습니다.  사용된 공간 값은 추정치입니다.  이러한 추정치는 수집 타이밍, 네트워크 연결, 노드 상태의 영향을 받습니다.

. Space 고장 * 탭에서 * 공간 소비 * 차트를 검토하십시오.
+
이 차트에는 테넌트의 모든 S3 버킷에 대한 총 공간 소비량이 표시됩니다.

+
이 테넌트에 할당량이 설정된 경우 사용된 할당량과 남은 할당량이 텍스트로 표시됩니다(예: `85.00 GB of 100 GB used`). 할당량이 설정되지 않은 경우 테넌트는 무제한 할당량을 가지며 텍스트에는 사용된 공간(예:)만 `85.00 GB used` 포함됩니다. 막대 차트는 각 버킷 또는 컨테이너의 할당량 백분율을 보여 줍니다. 테넌트가 스토리지 할당량을 1% 이상 초과하고 1GB 이상 초과한 경우 총 할당량과 초과 금액이 차트에 표시됩니다.

+
막대 차트 위에 커서를 놓으면 각 버킷이나 컨테이너에서 사용하는 저장소를 볼 수 있습니다. 사용 가능한 공간 세그먼트 위에 커서를 놓으면 남은 스토리지 할당량 크기를 확인할 수 있습니다.

+
image::../media/tenant_bucket_space_consumption_GM.png[테넌트 버킷 소비 막대 차트]

+

CAUTION: 할당량 사용은 내부 추정치에 기초하며 경우에 따라 초과될 수 있습니다. 예를 들어, 테넌트가 객체를 업로드하기 시작할 때 StorageGRID는 할당량을 확인하고 테넌트가 할당량을 초과할 경우 새 베스트(ingest)를 거부합니다. 그러나 StorageGRID에서는 할당량이 초과되었는지 확인할 때 현재 업로드 크기를 고려하지 않습니다. 개체를 삭제하면 할당량 사용이 다시 계산될 때까지 테넌트가 일시적으로 새 개체를 업로드하지 못할 수 있습니다. 할당량 사용량 계산에는 10분 이상이 소요될 수 있습니다.

+

NOTE: 테넌트의 할당량 사용량은 테넌트가 StorageGRID에 업로드한 총 개체 데이터 양(논리적 크기)을 나타냅니다. 할당량 사용량은 이러한 객체의 복제본과 해당 메타데이터(물리적 크기)를 저장하는 데 사용되는 공간을 나타내지 않습니다.

+

NOTE: 테넌트 할당량 사용량 높음 * 알림 규칙을 설정하여 테넌트가 할당량을 사용하고 있는지 확인할 수 있습니다. 활성화된 경우 테넌트가 할당량의 90%를 사용한 경우 이 경고가 트리거됩니다. 자세한 내용은 을 link:../monitor/editing-alert-rules.html["알림 규칙을 편집합니다"]참조하십시오.

. Space 고장 * 탭에서 * Bucket 세부 정보 * 를 검토합니다.
+
이 표에는 테넌트의 S3 버킷이 나와 있습니다. 사용된 공간 은 버킷 또는 컨테이너에 있는 오브젝트 데이터의 총 양입니다. 이 값은 ILM 복사본 및 개체 메타데이터에 필요한 스토리지 공간을 나타내지 않습니다.

. 필요에 따라 * CSV로 내보내기 * 를 선택하여 각 버킷 또는 컨테이너의 사용량 값이 포함된 .csv 파일을 보고 내보냅니다.
+
개별 S3 테넌트 파일의 내용은 `.csv` 다음 예제와 같습니다.

+
image::../media/tenant_bucket_details_csv.png[테넌트 버킷 세부 정보 CSV 예]

+
파일을 스프레드시트 응용 프로그램에서 열거나 자동화에서 사용할 수 `.csv` 있습니다.

. 필요에 따라 * Allowed features * 탭을 선택하여 테넌트에 대해 활성화된 권한 및 기능의 목록을 확인합니다. link:../admin/editing-tenant-account.html["테넌트 계정을 편집합니다"]이러한 설정을 변경해야 하는지 확인하십시오.
. 테넌트에 * 그리드 페더레이션 연결 사용 * 권한이 있는 경우 * 그리드 페더레이션 * 탭을 선택하여 연결에 대해 자세히 알아보십시오.
+
link:../admin/grid-federation-overview.html["그리드 페더레이션은 무엇입니까?"]및 을 link:../admin/grid-federation-manage-tenants.html["그리드 페더레이션을 위해 허용된 테넌트를 관리합니다"]참조하십시오.





== 네트워크 트래픽을 봅니다

테넌트를 위한 트래픽 분류 정책이 마련되어 있는 경우 해당 테넌트의 네트워크 트래픽을 검토하십시오.

.단계
. *구성* > *네트워크* > *트래픽 분류*를 선택합니다.
+
트래픽 분류 정책 페이지가 나타나고 기존 정책이 표에 나열됩니다.

. 정책 목록을 검토하여 특정 테넌트에 적용되는 정책을 식별합니다.
. 정책과 관련된 메트릭을 보려면 정책 왼쪽의 라디오 버튼을 선택하고 * Metrics * 를 선택합니다.
. 그래프를 분석하여 정책에 따라 트래픽이 제한되는 빈도와 정책을 조정해야 하는지 여부를 결정합니다.


자세한 내용은 을 link:../admin/managing-traffic-classification-policies.html["트래픽 분류 정책을 관리합니다"] 참조하십시오.



== 감사 로그를 사용합니다

필요에 따라 감사 로그를 사용하여 테넌트의 활동을 보다 세부적으로 모니터링할 수 있습니다.

예를 들어 다음과 같은 유형의 정보를 모니터링할 수 있습니다.

* Put, Get 또는 Delete 같은 특정 클라이언트 작업입니다
* 개체 크기
* 개체에 적용된 ILM 규칙
* 클라이언트 요청의 소스 IP입니다


감사 로그는 선택한 로그 분석 도구를 사용하여 분석할 수 있는 텍스트 파일에 기록됩니다. 이를 통해 클라이언트 활동을 더 잘 이해하거나 정교한 차지백 및 청구 모델을 구현할 수 있습니다.

자세한 내용은 을 link:../audit/index.html["감사 로그를 검토합니다"] 참조하십시오.



== Prometheus 메트릭을 사용합니다

선택적으로 Prometheus 메트릭을 사용하여 테넌트 활동을 보고합니다.

* 그리드 관리자에서 *지원* > *도구* > *메트릭*을 선택합니다.  S3 개요와 같은 기존 대시보드를 사용하여 클라이언트 활동을 검토할 수 있습니다.
+

NOTE: 메트릭 페이지에서 사용할 수 있는 도구는 주로 기술 지원 부서에서 사용하도록 설계되었습니다. 이러한 도구 내의 일부 기능 및 메뉴 항목은 의도적으로 작동하지 않습니다.

* Grid Manager 상단에서 도움말 아이콘을 선택하고 * API documentation * 을 선택합니다. Grid Management API의 Metrics(메트릭) 섹션에 있는 메트릭을 사용하여 테넌트 활동에 대한 사용자 지정 알림 규칙 및 대시보드를 생성할 수 있습니다.


자세한 내용은 을 link:reviewing-support-metrics.html["지원 메트릭을 검토합니다"] 참조하십시오.
