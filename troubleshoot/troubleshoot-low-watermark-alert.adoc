---
permalink: troubleshoot/troubleshoot-low-watermark-alert.html 
sidebar: sidebar 
keywords: troubleshoot low soft read-only watermark override alert, optimized watermarks 
summary: 스토리지 볼륨 워터마크에 사용자 지정 값을 사용하는 경우 읽기 전용 로우 워터마크 재정의 알림을 확인해야 할 수 있습니다. 가능한 경우 최적화된 값을 사용하도록 시스템을 업데이트해야 합니다. 
---
= 낮은 읽기 전용 배경무늬 재정의 알림 문제 해결
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
스토리지 볼륨 워터마크에 사용자 지정 값을 사용하는 경우 * 읽기 전용 로우 워터마크 재정의 * 알림을 확인해야 할 수 있습니다. 가능한 경우 최적화된 값을 사용하도록 시스템을 업데이트해야 합니다.

이전 릴리즈에서 세 가지 link:../admin/what-storage-volume-watermarks-are.html["스토리지 볼륨 워터마크입니다"] 설정은 글로벌 설정 및 #8212였습니다. 모든 스토리지 노드의 모든 스토리지 볼륨에 동일한 값이 적용되었습니다. StorageGRID 11.6부터 소프트웨어는 스토리지 노드의 크기와 볼륨의 상대적 용량을 기준으로 각 스토리지 볼륨에 대해 이러한 워터마크를 최적화할 수 있습니다.

StorageGRID 11.6 이상으로 업그레이드하면 다음 중 하나가 적용되지 않는 한 최적화된 읽기 전용 및 읽기-쓰기 워터마크가 모든 스토리지 볼륨에 자동으로 적용됩니다.

* 시스템의 용량이 거의 다 되었으며, 최적화된 워터마크가 적용된 경우 새 데이터를 사용할 수 없습니다. 이 경우 StorageGRID는 워터마크 설정을 변경하지 않습니다.
* 이전에 스토리지 볼륨 워터마크를 사용자 지정 값으로 설정했습니다. StorageGRID는 사용자 지정 워터마크 설정을 최적화된 값으로 재정의하지 않습니다. 그러나 스토리지 볼륨 소프트 읽기 전용 워터마크에 대한 사용자 지정 값이 너무 작으면 StorageGRID에서 * 로우 읽기 전용 워터마크 무시 * 경고를 트리거할 수 있습니다.




== 경고를 이해합니다

스토리지 볼륨 워터마크에 사용자 지정 값을 사용하는 경우 하나 이상의 스토리지 노드에 대해 * 읽기 전용 로우 워터마크 재정의 * 알림이 트리거될 수 있습니다.

알림의 각 인스턴스는 스토리지 볼륨 소프트 읽기 전용 워터마크의 사용자 지정 값이 해당 스토리지 노드에 대해 최적화된 최소값보다 작음을 나타냅니다. 사용자 지정 설정을 계속 사용하는 경우 스토리지 노드가 읽기 전용 상태로 안전하게 전환되기 전에 공간이 매우 부족할 수 있습니다. 노드가 용량에 도달하면 일부 스토리지 볼륨을 액세스할 수 없게 되거나 자동으로 마운트 해제될 수 있습니다.

예를 들어 이전에 스토리지 볼륨 소프트 읽기 전용 워터마크를 5GB로 설정했다고 가정합니다. 이제 StorageGRID가 스토리지 노드 A의 4개 스토리지 볼륨에 대해 다음과 같은 최적화된 값을 계산했다고 가정합니다.

[cols="2a,2a"]
|===


 a| 
볼륨 0
 a| 
12GB



 a| 
볼륨 1
 a| 
12GB



 a| 
볼륨 2
 a| 
11GB



 a| 
볼륨 3
 a| 
15GB

|===
사용자 지정 워터마크(5GB)가 해당 노드의 모든 볼륨(11GB)에 대해 최적화된 최소값보다 작기 때문에 스토리지 노드 A에 대해 * 낮은 읽기 전용 워터마크 재정의 * 알림이 트리거됩니다. 사용자 지정 설정을 계속 사용하는 경우 노드가 공간이 매우 부족해서 읽기 전용 상태로 안전하게 전환될 수 있습니다.



== 경고를 해결합니다

하나 이상의 * 낮은 읽기 전용 배경무늬 무시 * 알림이 트리거된 경우 다음 단계를 따르십시오. 현재 사용자 지정 워터마크 설정을 사용하고 있고 경고가 트리거되지 않았더라도 최적화된 설정을 사용하려는 경우에도 이 지침을 사용할 수 있습니다.

.시작하기 전에
* StorageGRID 11.6 이상으로 업그레이드를 완료했습니다.
* 을 사용하여 그리드 관리자에 로그인되어 있습니다.link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"]
* 이 link:../admin/admin-group-permissions.html["루트 액세스 권한"]있습니다.


.이 작업에 대해
사용자 지정 배경무늬 설정을 새 배경무늬 재정의로 업데이트하여 * 낮은 읽기 전용 배경무늬 무시 * 알림을 확인할 수 있습니다. 그러나 하나 이상의 스토리지 노드가 거의 꽉 찼거나 특별한 ILM 요구 사항이 있는 경우 먼저 최적화된 스토리지 워터마크를 확인하고 해당 스토리지 노드를 사용하기에 안전한지 확인해야 합니다.



=== 전체 그리드에 대한 객체 데이터 사용량을 평가합니다

.단계
. *노드*를 선택하세요.
. 그리드의 각 사이트에 대해 노드 목록을 확장합니다.
. 모든 사이트의 각 스토리지 노드에 대해 * 사용된 객체 데이터 * 열에 표시된 백분율 값을 검토합니다.
+
image::../media/nodes_page_object_data_used_with_alert.png[3 SNS에 사용된 오브젝트 데이터를 보여주는 노드 페이지입니다]

. 적절한 단계를 따릅니다.
+
.. 스토리지 노드 중 거의 꽉 참(예: 모든 * 사용된 객체 데이터 * 값이 80% 미만인 경우)이 없는 경우 재정의 설정을 사용할 수 있습니다. 로 이동합니다. <<use-optimized-watermarks,최적화된 워터마크를 사용합니다>>
.. ILM 규칙이 엄격한 수집 동작을 사용하거나 특정 스토리지 풀이 거의 꽉 찬 경우 및 의 단계를 <<view-optimized-watermarks,최적화된 스토리지 워터마크를 봅니다>><<determine-optimized-watermarks,최적화된 워터마크를 사용할 수 있는지 확인합니다>>수행합니다.






=== [[view-optimized-watermarks]] 최적화된 스토리지 워터마크를 봅니다

StorageGRID는 두 가지 Prometheus 메트릭을 사용하여 스토리지 볼륨 소프트 읽기 전용 워터마크에 대해 계산된 최적화된 값을 표시합니다. 그리드의 각 스토리지 노드에 대해 최적화된 최소 및 최대 값을 볼 수 있습니다.

.단계
. *지원* > *도구* > *측정항목*을 선택하세요.
. Prometheus 섹션에서 Prometheus 사용자 인터페이스에 액세스할 링크를 선택합니다.
. 권장되는 최소 소프트 읽기 전용 워터마크를 보려면 다음 Prometheus 메트릭을 입력하고 * Execute * 를 선택합니다.
+
`storagegrid_storage_volume_minimum_optimized_soft_readonly_watermark`

+
마지막 열에는 각 스토리지 노드의 모든 스토리지 볼륨에 대한 소프트 읽기 전용 워터마크의 최소화된 값이 표시됩니다. 이 값이 스토리지 볼륨 소프트 읽기 전용 워터마크에 대한 사용자 지정 설정보다 크면 스토리지 노드에 대해 * 낮은 읽기 전용 워터마크 무시 * 경고가 트리거됩니다.

. 권장되는 최대 소프트 읽기 전용 워터마크를 보려면 다음 Prometheus 메트릭을 입력하고 * Execute * 를 선택합니다.
+
`storagegrid_storage_volume_maximum_optimized_soft_readonly_watermark`

+
마지막 열에는 각 스토리지 노드의 모든 스토리지 볼륨에 대한 소프트 읽기 전용 워터마크의 최대 최적화 값이 표시됩니다.

. [[Maximum_optimized_value]] 각 스토리지 노드에 대해 최적화된 최대 값을 기록합니다.




=== [[detect-optimized-watermarks]] 최적화된 워터마크를 사용할 수 있는지 결정합니다

.단계
. *노드*를 선택하세요.
. 각 온라인 스토리지 노드에 대해 다음 단계를 반복합니다.
+
.. 스토리지 노드 * > * 스토리지 * 를 선택합니다.
.. Object Stores(오브젝트 저장소) 테이블까지 아래로 스크롤합니다.
.. 각 오브젝트 저장소(볼륨)의 * 사용 가능 * 값을 해당 스토리지 노드에 대해 기록해 둔 최대 최적화 워터마크와 비교합니다.


. 모든 온라인 스토리지 노드에서 하나 이상의 볼륨에 해당 노드에 대해 최적화된 최대 워터마크보다 사용 가능한 공간이 더 많은 경우 로  이동하여 최적화된 워터마크를 <<use-optimized-watermarks,최적화된 워터마크를 사용합니다>> 사용합니다.
+
그렇지 않으면 가능한 한 빨리 그리드를 확장합니다. link:../expand/adding-storage-volumes-to-storage-nodes.html["스토리지 볼륨을 추가합니다"]을 기존 노드 또는 link:../expand/adding-grid-nodes-to-existing-site-or-adding-new-site.html["새 스토리지 노드를 추가합니다"]로 변경합니다. 그런 다음 으로 <<use-optimized-watermarks,최적화된 워터마크를 사용합니다>> 이동하여 워터마크 설정을 업데이트합니다.

. 저장소 볼륨 워터마크에 대해 사용자 지정 값을 계속 사용해야 하거나 link:../monitor/disabling-alert-rules.html["사용 안 함"]* 낮은 읽기 전용 워터마크가 무시 * 경고를 사용해야 하는 경우link:../monitor/silencing-alert-notifications.html["침묵"]
+

NOTE: 모든 스토리지 노드의 모든 스토리지 볼륨에 동일한 사용자 지정 워터마크 값이 적용됩니다. 스토리지 볼륨 워터마크에 권장되는 값보다 작은 값을 사용하면 노드가 용량에 도달하면 일부 스토리지 볼륨을 자동으로 마운트 해제된 상태로 액세스할 수 없게 될 수 있습니다.





=== [[Use-optimized-watermarks]] 최적화된 워터마크를 사용합니다

.단계
. *지원* > *기타* > *저장소 워터마크*로 이동하세요.
. 최적화된 값 사용 * 확인란을 선택합니다.
. 저장 * 을 선택합니다.


스토리지 노드의 크기와 볼륨의 상대적 용량에 따라 최적화된 스토리지 볼륨 워터마크 설정이 각 스토리지 볼륨에 적용됩니다.
