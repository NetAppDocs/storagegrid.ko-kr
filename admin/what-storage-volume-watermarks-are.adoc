---
permalink: admin/what-storage-volume-watermarks-are.html 
sidebar: sidebar 
keywords: what are storage volume watermarks, storage volume soft read-only watermark, storage volume hard read-only watermark, storage volume read-write watermark 
summary: StorageGRID는 세 개의 스토리지 볼륨 워터마크를 사용하여 공간이 매우 부족하기 전에 스토리지 노드가 읽기 전용 상태로 안전하게 전환되도록 하고 읽기 전용 상태로 전환된 스토리지 노드가 다시 읽기-쓰기로 전환되도록 합니다. 
---
= 스토리지 볼륨 워터마크란 무엇입니까?
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
StorageGRID는 세 개의 스토리지 볼륨 워터마크를 사용하여 공간이 매우 부족하기 전에 스토리지 노드가 읽기 전용 상태로 안전하게 전환되도록 하고 읽기 전용 상태로 전환된 스토리지 노드가 다시 읽기-쓰기로 전환되도록 합니다.

image::../media/storage_volume_watermarks.png[스토리지 볼륨 워터마크입니다]


NOTE: 스토리지 볼륨 워터마크는 복제되고 삭제 코딩 오브젝트 데이터에 사용되는 공간에만 적용됩니다. 볼륨 0의 오브젝트 메타데이터용으로 예약된 공간에 대한 자세한 내용은 을 참조하십시오link:managing-object-metadata-storage.html["오브젝트 메타데이터 스토리지 관리"].



== 소프트 읽기 전용 워터마크란 무엇입니까?

스토리지 볼륨 소프트 읽기 전용 워터마크 * 는 객체 데이터에 대한 스토리지 노드의 가용 공간이 가득 차있음을 나타내는 첫 번째 워터마크입니다.

스토리지 노드의 각 볼륨에 사용 가능한 공간이 해당 볼륨의 소프트 읽기 전용 워터마크보다 적은 경우 스토리지 노드는 _READ-ONLY MODE_로 전환됩니다. 읽기 전용 모드는 스토리지 노드가 나머지 StorageGRID 시스템에 읽기 전용 서비스를 알리는 반면 보류 중인 모든 쓰기 요청을 처리하는 것을 의미합니다.

예를 들어 스토리지 노드의 각 볼륨에 10GB의 소프트 읽기 전용 워터마크가 있다고 가정합니다. 각 볼륨의 사용 가능한 공간이 10GB 미만이면 스토리지 노드가 소프트 읽기 전용 모드로 전환됩니다.



== 하드 읽기 전용 워터마크란 무엇입니까?

스토리지 볼륨 하드 읽기 전용 워터마크 * 는 오브젝트 데이터에 대한 노드의 사용 가능한 공간이 가득 차있음을 나타내는 다음 워터마크입니다.

볼륨의 여유 공간이 해당 볼륨의 하드 읽기 전용 워터마크보다 작으면 볼륨에 대한 쓰기가 실패합니다. 그러나 다른 볼륨에 대한 쓰기는 해당 볼륨의 여유 공간이 하드 읽기 전용 워터마크보다 작아질 때까지 계속될 수 있습니다.

예를 들어 스토리지 노드의 각 볼륨에 하드 읽기 전용 워터마크가 5GB라고 가정합니다. 각 볼륨의 사용 가능한 공간이 5GB 미만이면 스토리지 노드가 더 이상 쓰기 요청을 수락하지 않습니다.

하드 읽기 전용 워터마크는 항상 소프트 읽기 전용 워터마크보다 작습니다.



== 읽기-쓰기 워터마크란 무엇입니까?

스토리지 볼륨 읽기/쓰기 워터마크 * 는 읽기 전용 모드로 전환된 스토리지 노드에만 적용됩니다. 노드가 다시 읽기-쓰기가 될 수 있는 시기를 결정합니다. 스토리지 노드에 있는 스토리지 볼륨 중 하나의 사용 가능한 공간이 해당 볼륨의 읽기-쓰기 워터마크보다 크면 노드는 자동으로 읽기-쓰기 상태로 전환됩니다.

예를 들어 스토리지 노드가 읽기 전용 모드로 전환되었다고 가정해 보겠습니다. 또한 각 볼륨에 30GB의 읽기-쓰기 워터마크가 있다고 가정합니다. 볼륨의 사용 가능한 공간이 30GB로 증가하는 즉시 노드는 다시 읽기-쓰기가 됩니다.

읽기-쓰기 워터마크는 항상 소프트 읽기 전용 워터마크와 하드 읽기 전용 워터마크보다 큽니다.



== 스토리지 볼륨 워터마크를 봅니다

현재 워터마크 설정 및 시스템 최적화 값을 볼 수 있습니다. 최적화된 워터마크를 사용하지 않는 경우 설정을 조정할 수 있는지 또는 조정할 수 있는지 여부를 결정할 수 있습니다.

.시작하기 전에
* StorageGRID 11.6 이상으로 업그레이드를 완료했습니다.
* 을 사용하여 그리드 관리자에 로그인되어 있습니다.link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"]
* 이 link:admin-group-permissions.html["루트 액세스 권한"]있습니다.




=== 현재 워터마크 설정을 봅니다

그리드 관리자에서 현재 스토리지 워터마크 설정을 볼 수 있습니다.

.단계
. *지원* > *기타* > *저장소 워터마크*를 선택하세요.
. 스토리지 워터마크 페이지에서 최적화된 값 사용 확인란을 확인합니다.
+
** 이 확인란을 선택하면 스토리지 노드의 크기와 볼륨의 상대적 용량에 따라 모든 스토리지 노드의 모든 스토리지 볼륨에 대해 세 개의 워터마크가 모두 최적화됩니다.
+
이 설정이 기본값이며 권장 설정입니다. 이 값을 업데이트하지 마십시오. 선택적으로, 할 수 <<view-optimized-storage-watermarks,최적화된 스토리지 워터마크를 봅니다>>있습니다.

** 최적화된 값 사용 확인란이 선택되어 있지 않으면 사용자 지정(최적화되지 않은) 워터마크가 사용됩니다. 사용자 지정 배경무늬 설정은 사용하지 않는 것이 좋습니다. 의 지침에 link:../troubleshoot/troubleshoot-low-watermark-alert.html["낮은 읽기 전용 배경무늬 재정의 알림 문제 해결"]따라 설정을 조정할 수 있는지 또는 조정할 수 있는지 결정합니다.
+
사용자 지정 워터마크 설정을 지정할 때는 0보다 큰 값을 입력해야 합니다.







=== [[view-optimized-storage-watermarks]] 최적화된 스토리지 워터마크를 봅니다

StorageGRID는 두 가지 Prometheus 메트릭을 사용하여 스토리지 볼륨 소프트 읽기 전용 워터마크에 대해 계산된 최적화된 값을 표시합니다. 그리드의 각 스토리지 노드에 대해 최적화된 최소 및 최대 값을 볼 수 있습니다.

. *지원* > *도구* > *측정항목*을 선택하세요.
. Prometheus 섹션에서 Prometheus 사용자 인터페이스에 액세스할 링크를 선택합니다.
. 권장되는 최소 소프트 읽기 전용 워터마크를 보려면 다음 Prometheus 메트릭을 입력하고 * Execute * 를 선택합니다.
+
`storagegrid_storage_volume_minimum_optimized_soft_readonly_watermark`

+
마지막 열에는 각 스토리지 노드의 모든 스토리지 볼륨에 대한 소프트 읽기 전용 워터마크의 최소화된 값이 표시됩니다. 이 값이 스토리지 볼륨 소프트 읽기 전용 워터마크에 대한 사용자 지정 설정보다 크면 스토리지 노드에 대해 * 낮은 읽기 전용 워터마크 무시 * 경고가 트리거됩니다.

. 권장되는 최대 소프트 읽기 전용 워터마크를 보려면 다음 Prometheus 메트릭을 입력하고 * Execute * 를 선택합니다.
+
`storagegrid_storage_volume_maximum_optimized_soft_readonly_watermark`

+
마지막 열에는 각 스토리지 노드의 모든 스토리지 볼륨에 대한 소프트 읽기 전용 워터마크의 최대 최적화 값이 표시됩니다.


