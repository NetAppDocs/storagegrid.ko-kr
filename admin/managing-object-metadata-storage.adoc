---
permalink: admin/managing-object-metadata-storage.html 
sidebar: sidebar 
keywords: object metadata, metadata capacity, best practices 
summary: StorageGRID 시스템의 오브젝트 메타데이터 용량은 해당 시스템에 저장할 수 있는 최대 오브젝트 수를 제어합니다. StorageGRID 시스템에 새 개체를 저장할 충분한 공간이 있는지 확인하려면 StorageGRID에서 개체 메타데이터를 저장하는 위치와 방법을 알아야 합니다. 
---
= 오브젝트 메타데이터 스토리지 관리
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
StorageGRID 시스템의 오브젝트 메타데이터 용량은 해당 시스템에 저장할 수 있는 최대 오브젝트 수를 제어합니다. StorageGRID 시스템에 새 개체를 저장할 충분한 공간이 있는지 확인하려면 StorageGRID에서 개체 메타데이터를 저장하는 위치와 방법을 알아야 합니다.



== 오브젝트 메타데이터란?

개체 메타데이터는 개체를 설명하는 정보입니다. StorageGRID는 오브젝트 메타데이터를 사용하여 그리드 전체의 모든 오브젝트의 위치를 추적하고 각 오브젝트의 라이프사이클 관리를 제공합니다.

StorageGRID의 개체에 대한 개체 메타데이터에는 다음 유형의 정보가 포함됩니다.

* 각 오브젝트의 고유 ID(UUID), 오브젝트 이름, S3 버킷의 이름, 테넌트 계정 이름 또는 ID, 오브젝트의 논리적 크기, 오브젝트를 처음 생성한 날짜와 시간, 오브젝트를 마지막으로 수정한 날짜와 시간이 포함된 시스템 메타데이터
* 객체와 연결된 모든 사용자 메타데이터 키 값 쌍입니다.
* S3 오브젝트의 경우 오브젝트와 연결된 오브젝트 태그 키 값 쌍이 됩니다.
* 복제된 오브젝트 복사본의 경우 각 복제본의 현재 스토리지 위치입니다.
* 삭제 코딩 오브젝트 복사본의 경우 각 분절의 현재 스토리지 위치입니다.
* 클라우드 스토리지 풀의 오브젝트 복사본의 경우 외부 버킷의 이름 및 오브젝트의 고유 식별자를 비롯한 오브젝트의 위치가 포함됩니다.
* 분할된 오브젝트 및 다중 파트 오브젝트의 경우 세그먼트 식별자 및 데이터 크기가 사용됩니다.




== 오브젝트 메타데이터는 어떻게 저장됩니까?

StorageGRID는 오브젝트 메타데이터를 Cassandra 데이터베이스에 유지하며, 이 데이터베이스는 오브젝트 데이터와 독립적으로 저장됩니다. 이중화를 제공하고 개체 메타데이터를 손실로부터 보호하기 위해 StorageGRID는 각 사이트의 시스템 모든 개체에 대한 메타데이터 복사본을 3개 저장합니다.

이 그림은 두 사이트의 스토리지 노드를 나타냅니다. 각 사이트에는 동일한 양의 오브젝트 메타데이터가 있으며 각 사이트의 메타데이터는 해당 사이트의 모든 스토리지 노드 간에 세분됩니다.

image::../media/metadata_space_across_sites.png[사이트 전체의 메타데이터 공간]



== 오브젝트 메타데이터는 어디에 저장됩니까?

이 그림은 단일 스토리지 노드의 스토리지 볼륨을 나타냅니다.

image::../media/metadata_space_storage_node.png[메타데이터 공간 스토리지 노드]

그림에 나와 있는 것처럼 StorageGRID는 각 스토리지 노드의 스토리지 볼륨 0에 객체 메타데이터를 위한 공간을 예약합니다. 이 경우 예약된 공간을 사용하여 오브젝트 메타데이터를 저장하고 중요한 데이터베이스 작업을 수행합니다. 스토리지 볼륨 0 및 스토리지 노드의 다른 모든 스토리지 볼륨의 나머지 공간은 오브젝트 데이터(복제된 복사본 및 삭제 코딩 단편)에만 사용됩니다.

특정 스토리지 노드의 개체 메타데이터에 예약된 공간의 양은 아래에 설명된 여러 요인에 따라 달라집니다.



== 메타데이터 예약 공간 설정입니다

Metadata Reserved space_는 모든 스토리지 노드의 볼륨 0에서 메타데이터로 예약될 공간의 양을 나타내는 시스템 차원의 설정입니다. 표에 나와 있는 것처럼 이 설정의 기본값은 다음을 기반으로 합니다.

* StorageGRID를 처음 설치할 때 사용한 소프트웨어 버전입니다.
* 각 스토리지 노드의 RAM 용량입니다.


[cols="1a,1a,1a"]
|===
| 초기 StorageGRID 설치에 사용되는 버전입니다 | 스토리지 노드의 RAM 크기입니다 | 기본 메타데이터 예약 공간 설정입니다 


 a| 
11.5 - 11.9
 a| 
그리드의 각 스토리지 노드에 128GB 이상
 a| 
8TB(8,000GB)



 a| 
 a| 
그리드의 스토리지 노드에서 128GB 미만
 a| 
3TB(3,000GB)



 a| 
11.1 - 11.4
 a| 
한 사이트의 각 스토리지 노드에 128GB 이상
 a| 
4TB(4,000GB)



 a| 
 a| 
각 사이트의 스토리지 노드에 128GB 미만
 a| 
3TB(3,000GB)



 a| 
11.0 이전 버전
 a| 
금액
 a| 
2TB(2,000GB)

|===


=== 메타데이터 예약 공간 설정을 봅니다

StorageGRID 시스템의 메타데이터 예약 공간 설정을 보려면 다음 단계를 수행하십시오.

.단계
. 구성 * > * 시스템 * > * 스토리지 설정 * 을 선택합니다.
. 저장소 설정 페이지에서 * 메타데이터 예약 공간 * 섹션을 확장합니다.


StorageGRID 11.8 이상의 경우 메타데이터 예약 공간 값은 100GB 이상 1PB 이하여야 합니다.

각 스토리지 노드에 128GB 이상의 RAM이 있는 새로운 StorageGRID 11.6 이상 설치의 기본 설정은 8,000GB(8TB)입니다.



== 메타데이터의 실제 예약 공간입니다

시스템 차원 메타데이터 예약 공간 설정과 달리 각 스토리지 노드에 대해 _actual reserved space_for object 메타데이터가 결정됩니다. 지정된 스토리지 노드에 대해 메타데이터의 실제 예약된 공간은 노드의 볼륨 0 크기 및 시스템 차원의 메타데이터 예약 공간 설정에 따라 달라집니다.

[cols="1a,1a"]
|===
| 노드에 대한 볼륨 0의 크기입니다 | 메타데이터의 실제 예약 공간입니다 


 a| 
500GB 미만(비운영 용도)
 a| 
볼륨 0의 10%



 a| 
500GB 이상 + 또는 + 메타데이터 전용 스토리지 노드
 a| 
다음 값 중 더 작은 값:

* 볼륨 0
* 메타데이터 예약 공간 설정입니다


* 참고 *: 메타데이터 전용 스토리지 노드에는 하나의 rangedb만 필요합니다.

|===


=== 메타데이터에 대한 실제 예약 공간을 봅니다

특정 스토리지 노드의 메타데이터에 대한 실제 예약 공간을 보려면 다음 단계를 따르십시오.

.단계
. Grid Manager에서 * nodes * > *_Storage Node_ * 를 선택합니다.
. Storage * 탭을 선택합니다.
. 커서를 Storage Used - Object Metadata 차트 위에 놓고 * Actual Reserved * 값을 찾습니다.
+
image::../media/storage_used_object_metadata_actual_reserved.png[사용된 스토리지 - 객체 메타데이터 - 실제 예약입니다]



스크린샷에서 * Actual Reserved * 값은 8TB입니다. 이 스크린샷은 새 StorageGRID 11.6 설치의 대규모 스토리지 노드에 대한 것입니다. 이 스토리지 노드의 시스템 차원 메타데이터 예약 공간 설정이 볼륨 0보다 작기 때문에 이 노드의 실제 예약 공간은 메타데이터 예약 공간 설정과 같습니다.



== 실제 예약 메타데이터 공간의 예

버전 11.7 이상을 사용하여 새 StorageGRID 시스템을 설치한다고 가정합니다. 이 예에서는 각 스토리지 노드에 128MB 이상의 RAM이 있고 SN1(Storage Node 1)의 볼륨 0이 6TB라고 가정합니다. 다음 값을 기준으로 합니다.

* 시스템 전체 * 메타데이터 예약 공간 * 이 8TB로 설정되어 있습니다. (각 스토리지 노드에 128GB RAM이 넘는 경우 새 StorageGRID 11.6 이상 설치의 기본값입니다.)
* SN1의 메타데이터에 대한 실제 예약 공간은 6TB입니다. (볼륨 0이 * Metadata Reserved space * 설정보다 작기 때문에 전체 볼륨이 예약됩니다.)




== 허용된 메타데이터 공간입니다

각 스토리지 노드의 실제 메타데이터 예약 공간은 오브젝트 메타데이터(_allowed metadata space_)에 사용할 수 있는 공간과 필수 데이터베이스 작업(예: 컴팩션 및 복구)에 필요한 공간, 향후 하드웨어 및 소프트웨어 업그레이드로 세분화됩니다. 허용되는 메타데이터 공간은 전체 오브젝트 용량을 관리합니다.

image::../media/metadata_allowed_space_volume_0.png[허용되는 메타데이터 공간 볼륨 0]

다음 표에서는 StorageGRID가 노드에 대한 메모리 양과 메타데이터에 대한 실제 예약된 공간을 기준으로 서로 다른 스토리지 노드에 대해 * 허용된 메타데이터 공간 * 을 계산하는 방법을 보여 줍니다.

[cols="1a,1a,2a,2a"]
|===


 a| 
 a| 
 a| 
* 스토리지 노드의 메모리 양 *



 a| 
 a| 
 a| 
lt; 128GB(&L)
 a| 
GT; = 128GB(&G



 a| 
* 메타데이터에 대한 실제 예약 공간 *
 a| 
lt; = 4 TB.(&L
 a| 
메타데이터를 위해 실제 예약된 공간의 60%, 최대 1.32TB
 a| 
메타데이터를 위해 실제 예약된 공간의 60%, 최대 1.98TB



 a| 
GT, 4TB(&G
 a| 
(메타데이터의 실제 예약 공간 −1TB) × 60%, 최대 1.32TB
 a| 
(메타데이터의 실제 예약 공간 −1TB) × 60%, 최대 3.96TB

|===


=== 허용된 메타데이터 공간을 봅니다

스토리지 노드에 대해 허용되는 메타데이터 공간을 보려면 다음 단계를 따르십시오.

.단계
. Grid Manager에서 * nodes * 를 선택합니다.
. 스토리지 노드를 선택합니다.
. Storage * 탭을 선택합니다.
. 커서를 Storage Used-object 메타데이터 차트 위에 놓고 * Allowed * 값을 찾습니다.
+
image::../media/storage_used_object_metadata_allowed.png[사용된 스토리지 - 객체 메타데이터 - 허용됨]



스크린샷에서 * Allowed * 값은 3.96TB로, 메타데이터에 대한 실제 예약된 공간이 4TB를 초과하는 스토리지 노드의 최대값입니다.

허용 * 값은 다음 Prometheus 메트릭에 해당합니다.

`storagegrid_storage_utilization_metadata_allowed_bytes`



== 허용되는 메타데이터 공간의 예

버전 11.6를 사용하여 StorageGRID 시스템을 설치한다고 가정합니다. 이 예에서는 각 스토리지 노드에 128MB 이상의 RAM이 있고 SN1(Storage Node 1)의 볼륨 0이 6TB라고 가정합니다. 다음 값을 기준으로 합니다.

* 시스템 전체 * 메타데이터 예약 공간 * 이 8TB로 설정되어 있습니다. (각 스토리지 노드에 128GB RAM이 넘는 경우 StorageGRID 11.6 이상의 기본값입니다.)
* SN1의 메타데이터에 대한 실제 예약 공간은 6TB입니다. (볼륨 0이 * Metadata Reserved space * 설정보다 작기 때문에 전체 볼륨이 예약됩니다.)
* SN1의 메타데이터에 허용되는 공간은 3TB이며<<table-allowed-space-for-metadata,메타데이터에 허용되는 공간에 대한 테이블입니다>>, 이 계산 결과는 메타데이터 -1TB의 실제 예약된 공간) × 60%(최대 3.96TB)입니다.




== 서로 다른 크기의 스토리지 노드가 오브젝트 용량에 미치는 영향

위에서 설명한 것처럼 StorageGRID는 각 사이트의 스토리지 노드에 오브젝트 메타데이터를 균등하게 분산합니다. 따라서 사이트에 크기가 다른 스토리지 노드가 있는 경우 사이트의 가장 작은 노드가 사이트의 메타데이터 용량을 결정합니다.

다음 예제를 고려해 보십시오.

* 크기가 다른 세 개의 스토리지 노드가 포함된 단일 사이트 그리드가 있습니다.
* 메타데이터 예약 공간 * 설정은 4TB입니다.
* 스토리지 노드에는 실제 예약된 메타데이터 공간과 허용되는 메타데이터 공간에 대해 다음 값이 있습니다.
+
[cols="1a,1a,1a,1a"]
|===
| 스토리지 노드 | 볼륨 0의 크기입니다 | 실제 예약된 메타데이터 공간입니다 | 허용된 메타데이터 공간입니다 


 a| 
SN1을 참조하십시오
 a| 
2.2TB
 a| 
2.2TB
 a| 
1.32TB



 a| 
에스엔2
 a| 
5TB
 a| 
4TB
 a| 
1.98TB



 a| 
SN3을 참조하십시오
 a| 
6TB
 a| 
4TB
 a| 
1.98TB

|===


개체 메타데이터는 사이트의 스토리지 노드에 균등하게 분산되므로 이 예제의 각 노드는 1.32TB의 메타데이터만 보유할 수 있습니다. sn2 및 SN3에 대해 허용되는 추가 0.66TB의 메타데이터 공간은 사용할 수 없습니다.

image::../media/metadata_space_three_storage_nodes.png[메타데이터 공간 3개의 스토리지 노드]

마찬가지로, StorageGRID는 각 사이트에서 StorageGRID 시스템의 모든 개체 메타데이터를 유지하므로 StorageGRID 시스템의 전체 메타데이터 용량은 가장 작은 사이트의 개체 메타데이터 용량에 따라 결정됩니다.

또한 오브젝트 메타데이터 용량은 최대 오브젝트 수를 제어하므로 한 노드에 메타데이터 용량이 부족한 경우 이 그리드는 효과적으로 가득 차게 됩니다.

.관련 정보
* 각 스토리지 노드의 오브젝트 메타데이터 용량을 모니터링하는 방법은 의 지침을 참조하십시오.link:../monitor/index.html["StorageGRID 모니터링"]
* 새 스토리지 노드를 추가하여 시스템의 오브젝트 메타데이터 용량을 link:../expand/index.html["그리드를 확장합니다"]늘립니다.

